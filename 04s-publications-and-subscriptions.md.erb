---
title: การเผยแพร่และบอกรับข้อมูล
slug: publications-and-subscriptions
date: 0004/01/02
number: 4.5
sidebar: true
contents: เข้าใจการทำงานของการเผยแพร่และบอกรับข้อมูล|เรียนรู้ว่าแพ็คเกจ Autopublish ทำงานอย่างไร|ตัวอย่างแบบต่างๆของการเผยแพร่ข้อมูล
paragraphs: 52
---

การเผยแพร่และบอกรับข้อมูล เป็นหนึ่งในพื้นฐานและแนวคิดหลักของ Meteor ซึ่งอาจจะทำให้คุณหัวหมุนได้เมื่อเริ่มต้นใช้มัน

มีความเข้าใจผิดๆเกี่ยวกับเรื่องนี้อยู่มาก เช่น เชื่อว่า Meteor ไม่มีความปลอดภัย หรือแอพ Meteor ไม่สามารถทำงานกับข้อมูลปริมาณมากๆได้

เหตุผลส่วนหนึ่งที่หลายๆคนสับสนกับเรื่องนี้ในตอนแรก ก็เพราะความมหัศจรรย์ที่ Meteor ทำให้เรา แม้ว่ามันจะก่อให้เกิดประโยชน์มากมาย แต่ก็ซ่อนการทำงานจริงๆไว้เบื้องหลัง (ถึงเรียกว่ามหัศจรรย์ไง) ดังนั้นในตอนนี้เราก็จะคลายความมหัศจรรย์นี้ออก แล้วลองทำความเข้าใจกับสิ่งที่เกิดขึ้นดู

### The Olden Days

////

////

////

////

////

### The Meteor Way

////

<%= diagram "client-server", "Pushing a subset of the database to the client.", "pull-right" %>

////

////

////

### Publishing

////

////

////

<%= diagram "collections-1", "All the posts contained in our database.", "pull-center" %>

////

////

<%= diagram "collections-2", "Excluding flagged posts.", "pull-center" %>

////

~~~js
// on the server
Meteor.publish('posts', function() {
  return Posts.find({flagged: false});
});
~~~

////

<% note do %>

### DDP

////

////

<% end %>

### Subscribing

////

////

////

<%= diagram "collections-3", "Subscribing to Bob's posts will mirror them on the client.", "pull-center" %>

////

~~~js
// on the server
Meteor.publish('posts', function(author) {
  return Posts.find({flagged: false, author: author});
});
~~~

////

~~~js
// on the client
Meteor.subscribe('posts', 'bob-smith');
~~~

////

### Finding

////

<%= diagram "collections-4", "Selecting a subset of documents on the client.", "pull-center" %>

////

~~~js
// on the client
Template.posts.helpers({
  posts: function(){
    return Posts.find(author: 'bob-smith', category: 'JavaScript');
  }
});
~~~

////

### Autopublish

////

////

<%= diagram "autopublish", "Autopublish", "pull-center"%>

////

////

////

### Publishing Full Collections

////

~~~js
Meteor.publish('allPosts', function(){
  return Posts.find();
});
~~~

<%= diagram "fullcollection", "Publishing a full collection", "pull-center" %>

////

### Publishing Partial Collections

////

~~~js
Meteor.publish('somePosts', function(){
  return Posts.find({'author':'Tom'});
});
~~~

<%= diagram "partialcollection", "Publishing a partial collection", "pull-center" %>

<% note do %>

### Behind The Scenes

////

////

////

////

- ////
- ////
- ////

////

<% end %>

### Publishing Partial Properties

////

////

~~~js
Meteor.publish('allPosts', function(){
  return Posts.find({}, {fields: {
    date: false
  }});
});
~~~

<%= diagram "partialproperties", "Publishing partial properties", "pull-center" %>

////

~~~js
Meteor.publish('allPosts', function(){
  return Posts.find({'author':'Tom'}, {fields: {
    date: false
  }});
});
~~~

### Summing Up

////

////

////
